<!DOCTYPE html>
<html>
  <head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js">
</script>

    <link href="adminClient.css" rel="stylesheet" type="text/css">
    <meta charset="UTF-8">
    <title>Admin Client App</title>
    
  </head>
  <body>

    <div class="tab">
  <button class="tablinks" onclick="switchTabs(event, 'newMessage')" id = "defaultOpen">New Message</button>
  <button class="tablinks" onclick="switchTabs(event, 'oldMessage')">Old Messages</button>
</div>

<div id="newMessage"class="tabcontent">

<!-- template add button -->
  <label>Template</label>
  <button onclick = "popupTemplateAdd()" id = "addButton"> + </button>
<!-- Drop down for template-->
  <select id = "tempSelect" onChange = "fillTemplate()" >
  </select>
  <form id="sendNewMessage" action="/send_message" method="post">
    <label>Title</label>
    <input id = "Title" type="text" name="Title" placeholder="Alert Title">

<!-- add type button-->
    <label>Type</label>
    <button id ="addButton" onclick="popupTypeAdd()">+</button> 
<!-- Drop down for types -->
    <select id ="MessageTypeID" name ="MessageTypeID">
      <option value = 0>--Select A Type--</option>
      <option value = 1>Emergency</option>
      <option value = 3>Sports</option>
      <option value = 4>Other</option>
    </select>

<!-- Message textbox -->
    <label >Content</label>
    <input type="text" placeholder="Your alert message" id ="Content" name ="Content" >
    <form action="" method="post" enctype="multipart/form-data" >
      <label> Upload an Image </input><br>
      <input id="imgUpload"type="file" name="avatar" accept=".jpg, .jpeg, .png, .pdf, .img"/>
    </form>
  
    <input type="button" value="Submit" id="sendAlertButton" onclick="sendConfirm()">


    
  </form>
</div>

<div id="oldMessage" class="tabcontent"> 
<div class="vertical-menu">
  <a href="#" class="active">Home</a>
  <a href="#">Message 1</a>
  <a href="#">Message 2</a>
  <a href="#">Message 3</a>
  <a href="#">Message 4</a>
  <a href="#">Message 1</a>
  <a href="#">Message 2</a>
  <a href="#">Message 3</a>
  <a href="#">Message 4</a>
  <a href="#">Message 1</a>
  <a href="#">Message 2</a>
  <a href="#">Message 3</a>
  <a href="#">Message 4</a>
</div>
<div class="deleted">
  <button class="deleted" onclick="popupDeleted()">Deleted Messages</button> 
  </div>
</div>

  </body>


<script src ="adminScripts.js"> 
</script>


<script>

const axios = require('axios')

function getData(){
axios.post("http://localhost:8081/new_messages")
  .then((res) => {

    const messageData = res.data
    console.log(messageData);


  

 
  const messageTitleData = messageData[0].Title;
  console.log(messageTitleData);
  const messageContentData = messageData[0].Content;
  console.log(messageContentData);
  const messageTypeData = messageData[0].MessageTypeID
  console.log(messageTypeData);


  document.getElementById("Title").value = messageTitleData;
  document.getElementById("Content").value = messageContentData;
  document.getElementById("MessageTypeID").value = messageTypeData;

  //document.querySelector("#Title").innerHTML = messageTitleData;
  //document.querySelector("#Content").innerHTML = messageContentData;
  //document.querySelector("#MessageTypeID").innerHTML = messageTypeData;
  })



}

setInterval(getData,5000);



//var $select = $('#tempSelect');
//$.getJSON('data.json', function(data){
  //$select.html('');
//  console.log(data);
  //for (var i =0; i< data['people'].length; i++){
  //  $select.append('option id ="' + data['people'][i]['id'] + '">' + data['people'][i]['name']+'</option>');
 // }


//});

</script>


</html>